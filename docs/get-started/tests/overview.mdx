---
sidebar_position: 1
title: Tests overview
description: Tests tell Doc Detective what actions to perform, how, and where.
---

import JsonYamlTabs from "@site/src/components/JsonYamlTabs";
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# Tests overview

Tests tell Doc Detective what actions to perform, how, and where. Tests are made of three sets of components:

- **Test specification**: The highest-level component, test specifications (or specs) are collection of tests that should run together. [Contexts](/docs/get-started/config/contexts) defined in the spec are shared by all tests in the spec. Test specifications are equivalent to test suites in other testing frameworks.
- **Test**: A test to run within a spec. Each test has a name, and a set of steps to perform. Tests are equivalent to test cases in other testing frameworks.
- **Steps**: A step is a single action to perform within a test. Each individual step acts as an assertion that the step completes as expected. Steps are roughly equivalent to assertions in other testing frameworks.

  Each step can perform an action, which is a command that tells Doc Detective what to do. Actions can have additional properties that further define the action.

  - [**checkLink**](/docs/get-started/actions/checkLink): Check if a URL returns an acceptable status code from a GET request.
  - [**click**](/docs/get-started/actions/click): Click or tap an element.
  - [**dragAndDrop**](/docs/get-started/actions/dragAndDrop): Drag an element and drop it on a target.
  - [**find**](/docs/get-started/actions/find): Check if an element exists with the specified selector.
  - [**goTo**](/docs/get-started/actions/goTo): Navigate to a specified URL.
  - [**httpRequest**](/docs/get-started/actions/httpRequest): Perform a generic HTTP request, for example to an API.
  - [**loadVariables**](/docs/get-started/actions/loadVariables): Load environment variables from a `.env` file.
  - [**saveCookie**](/docs/get-started/actions/saveCookie): Save a specific browser cookie to a file or environment variable for later reuse.
  - [**loadCookie**](/docs/get-started/actions/loadCookie): Load a specific cookie from a file or environment variable into the browser.
  - [**record**](/docs/get-started/actions/record) and [**stopRecord**](/docs/get-started/actions/stopRecord): Capture a video of test execution.
  - [**runCode**](/docs/get-started/actions/runCode): Assemble and run code.
  - [**runShell**](/docs/get-started/actions/runShell): Perform a native shell command.
  - [**screenshot**](/docs/get-started/actions/screenshot): Take a screenshot in PNG format.
  - [**type**](/docs/get-started/actions/type): Type keys. To type special keys, begin and end the string with `$` and use the special key's enum. For example, to type the Escape key, enter `$ESCAPE$`.
  - [**wait**](/docs/get-started/actions/wait): Pause before performing the next action.

## Test results

When Doc Detective runs a test, the result is one of three statuses:

- **PASS**: The test completed successfully.
- **FAIL**: The test encountered an error or assertion failure.
- **SKIPPED**: The test couldn't run in the current environment.

### Skipped tests

When Doc Detective runs tests, it checks if each [context](/docs/get-started/config/contexts) matches your current environment. If a context specifies a platform or browser that doesn't match the system running the test, Doc Detective skips that context and its associated test.

Doc Detective skips tests when:

- **Platform mismatch**: The context specifies a platform (Windows, macOS, or Linux) that doesn't match your current operating system.
- **Browser unavailable**: The context specifies a browser that isn't installed or available on your system.
- **All contexts skipped**: If all contexts for a test are skipped, the entire test is marked as SKIPPED (not PASS).

When a test is skipped, the results show a SKIPPED status in the output JSON:

```json
{
  "summary": {
    "tests": {
      "pass": 0,
      "fail": 0,
      "warning": 0,
      "skipped": 1  // Test was skipped
    },
    "contexts": {
      "pass": 0,
      "fail": 0,
      "warning": 0,
      "skipped": 1  // Context didn't match environment
    }
  },
  "specs": [
    {
      "result": "SKIPPED",
      "tests": [
        {
          "result": "SKIPPED",
          "contexts": [
            {
              "result": "SKIPPED",
              "platform": "windows",  // Current platform: linux
              "browser": {
                "name": "chrome"
              }
            }
          ]
        }
      ]
    }
  ]
}
```

This keeps your test reporting accurate and prevents skipped tests from incorrectly appearing as passing.

## Define a test

You can define test specs in multiple ways:

- [Standalone JSON files](standalone): Help you see the entirety of the spec and keep it in a separate, machine-readable format.
- [Inline JSON](inline): Define tests directly in your documentation source files.
- [Detected tests](detected): Automatically generated by Doc Detective based on your documentation source files and your configuration.

## Run tests

Doc Detective's `doc-detective` command runs your tests. Input files are read from your config's `input` property, but you can also specify input files directly in the command with the `--input` flag.

This example runs all test specs in your config's `input` and `runTest.input` parameters:

<Tabs>
  <TabItem value="npx" label="NPX" default>

```bash
npx doc-detective
```

  </TabItem>
  <TabItem value="docker" label="Docker">

```bash
docker run -v .:/app docdetective/docdetective
```

:::note
The `-v` argument mounts your current directory (`.`) to `/app` in the container, giving Doc Detective access to your test specifications.
:::

  </TabItem>
</Tabs>

This example runs all test specs in a file named `doc-content.md` in the `samples` directory:

<Tabs>
  <TabItem value="npx" label="NPX" default>

```bash
npx doc-detective --input ./samples/doc-content.md
```

  </TabItem>
  <TabItem value="docker" label="Docker">

```bash
docker run -v .:/app docdetective/docdetective --input /app/samples/doc-content.md
```

  </TabItem>
</Tabs>

### Remotely hosted tests

You can run tests hosted remotely by specifying the URL of the test file with the `--input` argument. For example, to run tests from a file hosted at `https://doc-detective.com/sample.spec.json`, run the following command:

<Tabs>
  <TabItem value="npx" label="NPX" default>

```bash
npx doc-detective --input https://doc-detective.com/sample.spec.json
```

  </TabItem>
  <TabItem value="docker" label="Docker">

```bash
docker run docdetective/docdetective --input https://doc-detective.com/sample.spec.json
```

:::note
The `-v` argument is not necessary for remotely hosted tests since Docker doesn't need access to local files.
:::

  </TabItem>
</Tabs>

These tests run the same way as local tests, but Doc Detective fetches the test file from the specified URL and stores it in a temporary directory. The URL must be accessible to the machine running the tests.

### Run tests with multiple files

You can run tests using multiple files in multiple directories. Add as many comma-separated input values as necessary.

<Tabs>
  <TabItem value="npx" label="NPX" default>

```bash
npx doc-detective --input inline-tests.md,https://doc-detective.com/sample.spec.json,./samples/doc-content.md
```

  </TabItem>
  <TabItem value="docker" label="Docker">

```bash
docker run -v .:/app docdetective/docdetective --input /app/inline-tests.md,https://doc-detective.com/sample.spec.json,/app/samples/doc-content.md
```

  </TabItem>
</Tabs>

## Read the results

Doc Detective outputs test results to a `testResults-<timestamp>.json` file in your `output` directory. You can also specify your output directory with the `--output` flag:

<Tabs>
  <TabItem value="npx" label="NPX" default>

```bash
npx doc-detective --input ./samples/doc-content.md --output ./samples/
```

  </TabItem>
  <TabItem value="docker" label="Docker">

```bash
docker run -v .:/app docdetective/docdetective --input /app/samples/doc-content.md --output /app/samples/
```

  </TabItem>
</Tabs>
